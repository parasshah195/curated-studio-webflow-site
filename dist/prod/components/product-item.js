"use strict";(()=>{var n=class{PRODUCT_ITEM_SELECTOR='[data-el="product-item"]';productItemScrollTriggers=[];constructor(){this.refetchFinsweetFilterData(),this.loadShopyflowOnCMSList(),this.addStaggerAnimation()}refetchFinsweetFilterData(){window.addEventListener("ShopyflowReady",e=>{Shopyflow.on("collectionModuleReady",({el:o,collection:t})=>{window.FinsweetAttributes||=[],window.FinsweetAttributes.push(["list",i=>{let[r]=i;i.length&&(console.log("listInstance items",r.items),r.items.value.forEach(a=>{a.collectFields()}))}])})})}addStaggerAnimation(){this.addProductItemAnimation(this.PRODUCT_ITEM_SELECTOR)}loadShopyflowOnCMSList(){window.FinsweetAttributes||=[],window.FinsweetAttributes.push(["list",e=>{let[o]=e;e.length&&(window.IS_DEBUG_MODE&&console.debug("listInstance",o),o.addHook("beforeRender",t=>{if(!t.length)return;let i=t.map(r=>r.element);this.productItemScrollTriggers.flat().forEach(r=>r.kill()),this.productItemScrollTriggers=[],this.setInitialAnimState(i),this.addProductItemAnimation(i)}),o.addHook("pagination",t=>{t.length&&(ScrollTrigger.refresh(),window.Shopyflow.fetchNew().then(()=>{t.forEach(i=>{i.collectFields()})}))}))}])}setInitialAnimState(e){gsap.set(e,{opacity:0,y:50})}addProductItemAnimation(e){let o=ScrollTrigger.batch(e,{onEnter:t=>{gsap.to(t,{autoAlpha:1,y:0,stagger:.15})},start:"top bottom-=100px"});this.productItemScrollTriggers.push(o)}};})();
